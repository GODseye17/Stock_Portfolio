import { Stock } from '@/types/portfolio';

export const initialPortfolioData: Omit<Stock, 'id'>[] = [
  {
    particulars: 'AAPL',
    purchasePrice: 1490,
    quantity: 50,
    investment: 74500,
    portfolioPercentage: 5.0,
    exchange: 'NASDAQ',
    cmp: 1700,
    presentValue: 85007.5,
    gainLoss: 10507.5,
    peRatio: 18.69,
    latestEarnings: 91.02,
    sector: 'Technology',
  },
  {
    particulars: 'GOOGL',
    purchasePrice: 6466,
    quantity: 15,
    investment: 96990,
    portfolioPercentage: 6.0,
    exchange: 'NASDAQ',
    cmp: 8420,
    presentValue: 126294,
    gainLoss: 29304,
    peRatio: 32.63,
    latestEarnings: 257.8,
    sector: 'Technology',
  },
  {
    particulars: 'MSFT',
    purchasePrice: 780,
    quantity: 84,
    investment: 65520,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 1216,
    presentValue: 102102,
    gainLoss: 36582,
    peRatio: 17.68,
    latestEarnings: 68.72,
    sector: 'Technology',
  },
  {
    particulars: 'TSLA',
    purchasePrice: 130,
    quantity: 504,
    investment: 65520,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 113,
    presentValue: 56876.4,
    gainLoss: -8643.6,
    peRatio: 85.72,
    latestEarnings: 2.53,
    sector: 'Technology',
  },

  {
    particulars: 'AMZN',
    purchasePrice: 1151,
    quantity: 50,
    investment: 57550,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 1460,
    presentValue: 72980,
    gainLoss: 15430,
    peRatio: 55.53,
    latestEarnings: 26.11,
    sector: 'Technology',
  },
  {
    particulars: 'NVDA',
    purchasePrice: 4775,
    quantity: 16,
    investment: 76400,
    portfolioPercentage: 5.0,
    exchange: 'NASDAQ',
    cmp: 4794,
    presentValue: 76700.8,
    gainLoss: 300.8,
    peRatio: 34.69,
    latestEarnings: 145.92,
    sector: 'Technology',
  },
  {
    particulars: 'META',
    purchasePrice: 672,
    quantity: 61,
    investment: 40992,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 1293,
    presentValue: 78879.1,
    gainLoss: 37887.1,
    peRatio: 46.57,
    latestEarnings: 27.77,
    sector: 'Technology',
  },
  {
    particulars: 'Tata Tech',
    purchasePrice: 1072,
    quantity: 63,
    investment: 67536,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 662,
    presentValue: 41706,
    gainLoss: -25830,
    peRatio: 41.68,
    latestEarnings: 15.88,
    sector: 'Technology',
  },
  {
    particulars: 'BLS E-Services',
    purchasePrice: 232,
    quantity: 191,
    investment: 44312,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 153,
    presentValue: 29203.9,
    gainLoss: -15108.1,
    peRatio: 26.3,
    latestEarnings: 5.8,
    sector: 'Technology',
  },

  {
    particulars: 'Dmart',
    purchasePrice: 3777,
    quantity: 27,
    investment: 101979,
    portfolioPercentage: 7.0,
    exchange: 'NASDAQ',
    cmp: 3451,
    presentValue: 93179.7,
    gainLoss: -8799.3,
    peRatio: 82.63,
    latestEarnings: 41.75,
    sector: 'Consumer Goods',
  },
  {
    particulars: 'Tata Consumer',
    purchasePrice: 845,
    quantity: 90,
    investment: 76050,
    portfolioPercentage: 5.0,
    exchange: 'NASDAQ',
    cmp: 961,
    presentValue: 86499,
    gainLoss: 10449,
    peRatio: 26.56,
    latestEarnings: 134.77,
    sector: 'Consumer Goods',
  },
  {
    particulars: 'Pidilite',
    purchasePrice: 2376,
    quantity: 36,
    investment: 85536,
    portfolioPercentage: 6.0,
    exchange: 'NASDAQ',
    cmp: 2730,
    presentValue: 98280,
    gainLoss: 12744,
    peRatio: 71.13,
    latestEarnings: 38.36,
    sector: 'Consumer Goods',
  },

  {
    particulars: 'Tata Power',
    purchasePrice: 224,
    quantity: 225,
    investment: 50400,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 351,
    presentValue: 78975,
    gainLoss: 28575,
    peRatio: 29.36,
    latestEarnings: 11.94,
    sector: 'Energy',
  },
  {
    particulars: 'KPI Green',
    purchasePrice: 875,
    quantity: 50,
    investment: 43750,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 402,
    presentValue: 20120,
    gainLoss: -23630,
    peRatio: 29.26,
    latestEarnings: 13.75,
    sector: 'Energy',
  },
  {
    particulars: 'Suzlon',
    purchasePrice: 44,
    quantity: 450,
    investment: 19800,
    portfolioPercentage: 1.0,
    exchange: 'NASDAQ',
    cmp: 51,
    presentValue: 23112,
    gainLoss: 3312,
    peRatio: 61.25,
    latestEarnings: 0.84,
    sector: 'Energy',
  },

  {
    particulars: 'Sun Pharma',
    purchasePrice: 850,
    quantity: 60,
    investment: 51000,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 920,
    presentValue: 55200,
    gainLoss: 4200,
    peRatio: 28.5,
    latestEarnings: 32.28,
    sector: 'Healthcare',
  },
  {
    particulars: 'Dr Reddy\'s',
    purchasePrice: 4200,
    quantity: 12,
    investment: 50400,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 4450,
    presentValue: 53400,
    gainLoss: 3000,
    peRatio: 35.2,
    latestEarnings: 126.42,
    sector: 'Healthcare',
  },
  {
    particulars: 'Apollo Hospitals',
    purchasePrice: 3800,
    quantity: 15,
    investment: 57000,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 3950,
    presentValue: 59250,
    gainLoss: 2250,
    peRatio: 42.8,
    latestEarnings: 92.29,
    sector: 'Healthcare',
  },

  {
    particulars: 'L&T',
    purchasePrice: 2800,
    quantity: 25,
    investment: 70000,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 2950,
    presentValue: 73750,
    gainLoss: 3750,
    peRatio: 32.1,
    latestEarnings: 91.90,
    sector: 'Infrastructure',
  },
  {
    particulars: 'UltraTech Cement',
    purchasePrice: 7200,
    quantity: 8,
    investment: 57600,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 7500,
    presentValue: 60000,
    gainLoss: 2400,
    peRatio: 38.5,
    latestEarnings: 194.81,
    sector: 'Infrastructure',
  },

  {
    particulars: 'Tata Steel',
    purchasePrice: 95,
    quantity: 500,
    investment: 47500,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 105,
    presentValue: 52500,
    gainLoss: 5000,
    peRatio: 15.2,
    latestEarnings: 6.91,
    sector: 'Metals',
  },
  {
    particulars: 'Hindalco',
    purchasePrice: 420,
    quantity: 120,
    investment: 50400,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 450,
    presentValue: 54000,
    gainLoss: 3600,
    peRatio: 18.5,
    latestEarnings: 24.32,
    sector: 'Metals',
  },

  {
    particulars: 'Reliance Industries',
    purchasePrice: 2450,
    quantity: 40,
    investment: 98000,
    portfolioPercentage: 6.0,
    exchange: 'NASDAQ',
    cmp: 2680,
    presentValue: 107200,
    gainLoss: 9200,
    peRatio: 18.5,
    latestEarnings: 145.20,
    sector: 'Oil & Gas',
  },
  {
    particulars: 'TCS',
    purchasePrice: 3850,
    quantity: 25,
    investment: 96250,
    portfolioPercentage: 6.0,
    exchange: 'NASDAQ',
    cmp: 4120,
    presentValue: 103000,
    gainLoss: 6750,
    peRatio: 25.8,
    latestEarnings: 159.70,
    sector: 'Technology',
  },
  {
    particulars: 'Infosys',
    purchasePrice: 1647,
    quantity: 36,
    investment: 59292,
    portfolioPercentage: 4.0,
    exchange: 'NASDAQ',
    cmp: 1725,
    presentValue: 62110.8,
    gainLoss: 2818.8,
    peRatio: 25.86,
    latestEarnings: 66.63,
    sector: 'Technology',
  },
  {
    particulars: 'Wipro',
    purchasePrice: 450,
    quantity: 120,
    investment: 54000,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 485,
    presentValue: 58200,
    gainLoss: 4200,
    peRatio: 21.5,
    latestEarnings: 22.60,
    sector: 'Technology',
  },
  {
    particulars: 'HCL Tech',
    purchasePrice: 1150,
    quantity: 40,
    investment: 46000,
    portfolioPercentage: 3.0,
    exchange: 'NASDAQ',
    cmp: 1180,
    presentValue: 47200,
    gainLoss: 1200,
    peRatio: 24.2,
    latestEarnings: 48.80,
    sector: 'Technology',
  },
];

export function calculatePortfolioPercentages(stocks: Omit<Stock, 'id'>[]): Omit<Stock, 'id'>[] {
  const totalInvestment = stocks.reduce((sum, stock) => sum + stock.investment, 0);
  
  return stocks.map(stock => ({
    ...stock,
    portfolioPercentage: Math.round((stock.investment / totalInvestment) * 100 * 100) / 100,
  }));
}

export const initialPortfolioWithPercentages = calculatePortfolioPercentages(initialPortfolioData);

export const sectorMapping = {
  'Financial': ['HDFC Bank', 'Bajaj Finance', 'ICICI Bank', 'Bajaj Housing'],
  'Technology': ['Affle India', 'LTI Mindtree', 'KPIT Tech', 'Tata Tech', 'BLS E-Services', 'TCS', 'Infosys', 'Wipro', 'HCL Tech'],
  'Consumer Goods': ['Dmart', 'Tata Consumer', 'Pidilite'],
  'Energy': ['Tata Power', 'KPI Green', 'Suzlon'],
  'Healthcare': ['Sun Pharma', 'Dr Reddy\'s', 'Apollo Hospitals'],
  'Infrastructure': ['L&T', 'UltraTech Cement'],
  'Metals': ['Tata Steel', 'Hindalco'],
  'Oil & Gas': ['Reliance Industries'],
};

export const portfolioSummary = {
  totalStocks: initialPortfolioData.length,
  totalInvestment: initialPortfolioData.reduce((sum, stock) => sum + stock.investment, 0),
  totalPresentValue: initialPortfolioData.reduce((sum, stock) => sum + stock.presentValue, 0),
  totalGainLoss: initialPortfolioData.reduce((sum, stock) => sum + stock.gainLoss, 0),
  sectors: Object.keys(sectorMapping).length,
  bestPerformingStock: initialPortfolioData.reduce((best, current) => 
    current.gainLoss > best.gainLoss ? current : best
  ),
  worstPerformingStock: initialPortfolioData.reduce((worst, current) => 
    current.gainLoss < worst.gainLoss ? current : worst
  ),
};
